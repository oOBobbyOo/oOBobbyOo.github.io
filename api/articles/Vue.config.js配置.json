{"title":"vue.config.js 配置","uid":"bbe4af776c0ccb3326bd13f893d1dc57","slug":"Vue.config.js配置","date":"2019-07-15T12:19:10.000Z","updated":"2021-05-14T05:59:44.902Z","comments":true,"path":"api/articles/Vue.config.js配置.json","keywords":null,"cover":"assets/vue.png","content":"<p>vue.config.js 是一个可选的配置文件，如果项目的 (和 package.json 同级的) 根目录中存在这个文件，那么它会被 @vue/cli-service 自动加载。</p>\n<span id=\"more\"></span>\n\n<p><a href=\"https://cli.vuejs.org/zh/config\"><code>配置参考</code></a></p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">&#x2F;&#x2F; vue.config.js\nconst path &#x3D; require(&#39;path&#39;)\nconst CompressionWebpackPlugin &#x3D; require(&#39;compression-webpack-plugin&#39;)\nconst productionGzipExtensions &#x3D; [&#39;js&#39;, &#39;css&#39;]\nconst isDevelopment &#x3D; process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;development&#39;\nconst isProduction &#x3D; process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39;\n\nmodule.exports &#x3D; &#123;\n  &#x2F;&#x2F; 部署应用包时的基本 URL\n  baseUrl: &#39;&#x2F;&#39;, &#x2F;&#x2F; Default: &#39;&#x2F;&#39;\n  &#x2F;&#x2F; 生成产环境构建文件的目录\n  outputDir: &#39;dist&#39;, &#x2F;&#x2F; Default: &#39;dist&#39;\n  &#x2F;&#x2F; 放置生成的静态资源 (js、css、img、fonts) 的 (相对于 outputDir 的) 目录\n  assetsDir: &#39;assets&#39;, &#x2F;&#x2F; Default: &#39;&#39;\n  &#x2F;&#x2F; 指定生成的 index.html 的输出路径 (相对于 outputDir)。也可以是一个绝对路径\n  indexPath: &#39;index.html&#39;,\n  &#x2F;&#x2F; 成的静态资源在它们的文件名中包含了 hash 以便更好的控制缓存\n  filenameHashing: true, &#x2F;&#x2F; Default: true\n  &#x2F;&#x2F; 多页面配置\n  pages: undefined,\n  &#x2F;&#x2F; 是否在开发环境下通过 eslint-loader 在每次保存时 lint 代码\n  lintOnSave: true, &#x2F;&#x2F; Default: true\n  &#x2F;&#x2F; 是否使用包含运行时编译器的 Vue 构建版本\n  runtimeCompiler: true, &#x2F;&#x2F; Default: false\n  &#x2F;&#x2F; 如果你不需要生产环境的 source map，可以将其设置为 false 以加速生产环境构建\n  productionSourceMap: false, &#x2F;&#x2F; Default: true\n  &#x2F;&#x2F; 设置生成的 HTML 中 &lt;link rel&#x3D;&quot;stylesheet&quot;&gt; 和 &lt;script&gt; 标签的 crossorigin 属性\n  crossorigin: undefined,\n  &#x2F;&#x2F; 在生成的 HTML 中的 &lt;link rel&#x3D;&quot;stylesheet&quot;&gt; 和 &lt;script&gt; 标签上启用 Subresource Integrity (SRI)。如果你构建后的文件是部署在 CDN 上的，启用该选项可以提供额外的安全性\n  integrity: false, &#x2F;&#x2F; Default: false\n  &#x2F;&#x2F; 通过 webpack-merge 合并到最终的配置中\n  configureWebpack: (config) &#x3D;&gt; &#123;\n    if (isDevelopment) &#123;\n      &#x2F;&#x2F; 开发环境配置\n      config.devtool &#x3D; &#39;cheap-module-eval-source-map&#39;\n    &#125; else &#123;\n      &#x2F;&#x2F; 生产构建配置\n\n      &#x2F;&#x2F; 忽略打包配置\n      config.externals &#x3D; cdn.externals\n\n      &#x2F;&#x2F; 开启gzip压缩\n      config.plugins.push(\n        new CompressionWebpackPlugin(&#123;\n          filename: (info) &#x3D;&gt; &#123;\n            return &#96;$&#123;info.path&#125;.gz$&#123;info.query&#125;&#96;\n          &#125;,\n          algorithm: &#39;gzip&#39;,\n          threshold: 10240, &#x2F;&#x2F; 只有大小大于该值的资源会被处理 10240\n          test: new RegExp(&#39;\\\\.(&#39; + productionGzipExtensions.join(&#39;|&#39;) + &#39;)$&#39;),\n          minRatio: 0.8, &#x2F;&#x2F; 只有压缩率小于这个值的资源才会被处理\n          deleteOriginalAssets: false, &#x2F;&#x2F; 删除原文件\n        &#125;)\n      )\n\n      &#x2F;&#x2F; 公共代码抽离\n      config.optimization &#x3D; &#123;\n        splitChunks: &#123;\n          cacheGroups: &#123;\n            vendor: &#123;\n              chunks: &#39;all&#39;,\n              test: &#x2F;node_modules&#x2F;,\n              name: &#39;vendor&#39;,\n              minChunks: 2,\n              priority: 100,\n            &#125;,\n          &#125;,\n        &#125;,\n      &#125;\n    &#125;\n\n    &#x2F;&#x2F; 开发生产共同配置\n    Object.assign(config, &#123;\n      resolve: &#123;\n        alias: &#123;\n          &#39;@&#39;: path.resolve(__dirname, &#39;.&#x2F;src&#39;),\n          &#39;@c&#39;: path.resolve(__dirname, &#39;.&#x2F;src&#x2F;components&#39;),\n          vue$: &#39;vue&#x2F;dist&#x2F;vue.esm.js&#39;,\n        &#125;,\n      &#125;,\n    &#125;)\n  &#125;,\n  &#x2F;&#x2F; 允许对内部的 webpack 配置进行更细粒度的修改\n  chainWebpack: (config) &#x3D;&gt; &#123;\n    if (isDevelopment) &#123;\n      &#x2F;&#x2F; 开发环境配置\n    &#125; else &#123;\n      &#x2F;&#x2F; 生产构建配置\n    &#125;\n  &#125;,\n  css: &#123;\n    &#x2F;&#x2F; 启用 CSS modules\n    modules: true,\n    &#x2F;&#x2F; 是否将组件中的 CSS 提取至一个独立的 CSS 文件中\n    extract: true, &#x2F;&#x2F; Default: 生产环境下是 true，开发环境下是 false\n    &#x2F;&#x2F; 是否为 CSS 开启 source map\n    sourceMap: false, &#x2F;&#x2F; 设置为 true 之后可能会影响构建的性能\n    loaderOptions: &#123;\n      &#x2F;&#x2F; css预设器配置项\n      css: &#123;\n        localIdentName: &#39;[name]-[hash]&#39;,\n        camelCase: &#39;only&#39;,\n      &#125;,\n      stylus: &#123;&#125;,\n    &#125;,\n  &#125;,\n  parallel: require(&#39;os&#39;).cpus().length &gt; 1, &#x2F;&#x2F; 是否为 Babel 或 TypeScript 使用 thread-loader, 仅作用于生产构建\n  pluginOptions: &#123;&#125;, &#x2F;&#x2F; 第三方插件配置\n  pwa: &#123;&#125;, &#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-cli&#x2F;tree&#x2F;dev&#x2F;packages&#x2F;%40vue&#x2F;cli-plugin-pwa\n  devServer: &#123;\n    open: true,\n    host: &#39;0.0.0.0&#39;, &#x2F;&#x2F; localhost\n    port: 8080,\n    https: false,\n    hotOnly: false,\n    proxy: &#123;\n      &#39;&#x2F;api&#39;: &#123;\n        target: &#39;&lt;url&gt;&#39;,\n        ws: true,\n        changOrigin: true,\n      &#125;,\n    &#125;,\n  &#125;,\n&#125;</code></pre>\n\n<h2 id=\"配置-alias\"><a href=\"#配置-alias\" class=\"headerlink\" title=\"配置 alias\"></a>配置 alias</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">const path &#x3D; require(&#39;path&#39;)\n\nfunction resolve(dir) &#123;\n  return path.join(__dirname, &#39;.&#x2F;&#39;, dir)\n&#125;\n\nchainWebpack: (config) &#x3D;&gt; &#123;\n  config.resolve.alias.set(&#39;assets&#39;, resolve(&#39;src&#x2F;assets&#39;)).set(&#39;common&#39;, resolve(&#39;src&#x2F;common&#39;)).set(&#39;components&#39;, resolve(&#39;src&#x2F;components&#39;))\n&#125;</code></pre>\n\n<h2 id=\"配置-svg\"><a href=\"#配置-svg\" class=\"headerlink\" title=\"配置 svg\"></a>配置 svg</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">&#x2F;&#x2F; npm install svg-sprite-loader\n\nchainWebpack: (config) &#x3D;&gt; &#123;\n  config.module.rule(&#39;svg&#39;).exclude.add(resolve(&#39;src&#x2F;icons&#39;)).end()\n\n  config.module\n    .rule(&#39;icons&#39;)\n    .test(&#x2F;\\.svg$&#x2F;)\n    .include.add(resolve(&#39;src&#x2F;icons&#39;))\n    .end()\n    .use(&#39;svg-sprite-loader&#39;)\n    .loader(&#39;svg-sprite-loader&#39;)\n    .options(&#123;\n      symbolId: &#39;icon-[name]&#39;,\n    &#125;)\n&#125;</code></pre>\n\n<h1 id=\"配置-Gizp\"><a href=\"#配置-Gizp\" class=\"headerlink\" title=\"配置 Gizp\"></a>配置 Gizp</h1><pre class=\"line-numbers language-JS\" data-language=\"JS\"><code class=\"language-JS\">&#x2F;&#x2F; npm install compression-webpack-plugin -D\nconst productionGzipExtensions &#x3D; [&#39;js&#39;, &#39;css&#39;]\n\nconfigureWebpack: &#123;\n    plugins: [\n      new CompressionWebpackPlugin(&#123;\n        filename: &#39;[path].gz[query]&#39;,\n        algorithm: &#39;gzip&#39;,\n        test: new RegExp(&#39;\\\\.(&#39; + productionGzipExtensions.join(&#39;|&#39;) + &#39;)$&#39;),\n        threshold: 10240,\n        minRatio: 0.8,\n        deleteOriginalAssets: false\n      &#125;)\n    ]\n  &#125;,</code></pre>\n","feature":true,"text":"vue.config.js 是一个可选的配置文件，如果项目的 (和 package.json 同级的) 根目录中存在这个文件，那么它会被 @vue/cli-service 自动加载。 配置参考 &#x2F;&#x2F; vue.config.js const path &#x3D...","link":"","photos":[],"count_time":{"symbolsCount":"6.2k","symbolsTime":"6 mins."},"categories":[{"name":"Vue","slug":"Vue","count":1,"path":"api/categories/Vue.json"}],"tags":[{"name":"Vue","slug":"Vue","count":1,"path":"api/tags/Vue.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-alias\"><span class=\"toc-text\">配置 alias</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-svg\"><span class=\"toc-text\">配置 svg</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-Gizp\"><span class=\"toc-text\">配置 Gizp</span></a>","author":{"name":"Bobby's Blog","slug":"blog-author","avatar":"/assets/user/bobby.jpg","link":"/","description":"欢迎来到我的博客 <br /> (σﾟ∀ﾟ)σ..:*☆哎哟不错哦","socials":{"github":"https://github.com/oOBobbyOo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"React组件异步加载","uid":"fba191276a9852d7cc27748cdc57a493","slug":"React组件异步加载","date":"2019-08-13T15:22:45.000Z","updated":"2021-05-14T06:07:56.764Z","comments":true,"path":"api/articles/React组件异步加载.json","keywords":null,"cover":"/assets/react.jpg","text":"使用 react-loadable 快速完成异步组件的编写npm install react-loadable --save &#x2F;&#x2F; eq: import Loadable from &#39;react-loadable&#39;; import Loadin...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"React","slug":"React","count":2,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":2,"path":"api/tags/React.json"}],"author":{"name":"Bobby's Blog","slug":"blog-author","avatar":"/assets/user/bobby.jpg","link":"/","description":"欢迎来到我的博客 <br /> (σﾟ∀ﾟ)σ..:*☆哎哟不错哦","socials":{"github":"https://github.com/oOBobbyOo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Create-react-app脚手架配置less、scss和css modules","uid":"bbd0c31743d20bd19a12a5038f16f175","slug":"Create-react-app脚手架配置less、scss和css modules","date":"2019-06-10T14:58:22.000Z","updated":"2021-05-14T09:30:29.961Z","comments":true,"path":"api/articles/Create-react-app脚手架配置less、scss和css modules.json","keywords":null,"cover":"/assets/react.jpg","text":"使用 create-react-app 创建的项目默认不支持 less scss，以下增加 less scss 配置的步骤 暴露配置文件 npm run eject 在 node_modules/react-scripts/config 下找到 webpack.config.de...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"React","slug":"React","count":2,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":2,"path":"api/tags/React.json"}],"author":{"name":"Bobby's Blog","slug":"blog-author","avatar":"/assets/user/bobby.jpg","link":"/","description":"欢迎来到我的博客 <br /> (σﾟ∀ﾟ)σ..:*☆哎哟不错哦","socials":{"github":"https://github.com/oOBobbyOo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}