{"title":"Create-react-app脚手架配置less、scss和css modules","uid":"bbd0c31743d20bd19a12a5038f16f175","slug":"Create-react-app脚手架配置less、scss和css modules","date":"2020-06-10T14:58:22.000Z","updated":"2021-05-14T10:40:16.000Z","comments":true,"path":"api/articles/Create-react-app脚手架配置less、scss和css modules.json","keywords":null,"cover":"/assets/react.jpg","content":"<p>使用 create-react-app 创建的项目默认不支持 less scss，以下增加 less scss 配置的步骤</p>\n<ul>\n<li>暴露配置文件</li>\n</ul>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">npm run eject</code></pre>\n\n<ul>\n<li>在 node_modules/react-scripts/config 下找到 webpack.config.dev.js 和 webpack.config-prod.js 配置文件进行修改</li>\n</ul>\n<p>安装 less-loader 和 less</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">npm install less-loader less --save-dev</code></pre>\n\n<p>修改 webpack.config.dev.js 和 webpack.config-prod.js 配置文件</p>\n<span id=\"more\"></span>\n\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">&#123;\n  test: &#x2F;\\.(css|less)$&#x2F;,\n  use: [\n    require.resolve(&#39;style-loader&#39;),\n    &#123;\n      loader: require.resolve(&#39;css-loader&#39;),\n      options: &#123;\n        importLoaders: 1,\n      &#125;,\n    &#125;,\n    &#123;\n      loader: require.resolve(&#39;postcss-loader&#39;),\n      options: &#123;\n        &#x2F;&#x2F; Necessary for external CSS imports to work\n        &#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;facebookincubator&#x2F;create-react-app&#x2F;issues&#x2F;2677\n        ident: &#39;postcss&#39;,\n        plugins: () &#x3D;&gt; [\n          require(&#39;postcss-flexbugs-fixes&#39;),\n          autoprefixer(&#123;\n            browsers: [\n              &#39;&gt;1%&#39;,\n              &#39;last 4 versions&#39;,\n              &#39;Firefox ESR&#39;,\n              &#39;not ie &lt; 9&#39;, &#x2F;&#x2F; React doesn&#39;t support IE8 anyway\n            ],\n            flexbox: &#39;no-2009&#39;,\n          &#125;),\n        ],\n      &#125;,\n    &#125;,\n    &#123;\n      loader: require.resolve(&#39;less-loader&#39;) &#x2F;&#x2F; compiles Less to CSS\n    &#125;\n  ],\n&#125;,</code></pre>\n\n<p>使用 CSS modules</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">&#123;\n    loader: require.resolve(&#39;css-loader&#39;),\n    options: &#123;\n        importLoaders: 1,\n    &#125;,\n&#125;,\n\n&#123;\n  loader: require.resolve(&#39;css-loader&#39;),\n  options: &#123;\n    importLoaders: 1,\n    + modules: true,\n    + localIdentName: &quot;[name]__[local]___[hash:base64:5]&quot;\n  &#125;,\n&#125;</code></pre>\n\n<p>安装 scss-loader 和 scss</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">npm install sass-loader node-sass --save-dev</code></pre>\n\n<p>修改 webpack.config.dev.js 和 webpack.config-prod.js 配置文件</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">&#123;\n    loader: require.resolve(&#39;file-loader&#39;),\n    &#x2F;&#x2F; Exclude &#96;js&#96; files to keep &quot;css&quot; loader working as it injects\n    &#x2F;&#x2F; it&#39;s runtime that would otherwise processed through &quot;file&quot; loader.\n    &#x2F;&#x2F; Also exclude &#96;html&#96; and &#96;json&#96; extensions so they get processed\n    &#x2F;&#x2F; by webpacks internal loaders.\n    exclude: [&#x2F;\\.js$&#x2F;, &#x2F;\\.html$&#x2F;, &#x2F;\\.json$&#x2F;, &#x2F;\\.scss$&#x2F;],\n    options: &#123;\n         name: &#39;static&#x2F;media&#x2F;[name].[hash:8].[ext]&#39;,\n    &#125;,\n&#125;,\n&#123;\n    test: &#x2F;\\.scss$&#x2F;,\n    loaders: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39;],\n&#125;</code></pre>\n\n<p>使用 CSS modules</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"> &#123;\n  test: &#x2F;\\.scss$&#x2F;,\n  use: [\n    &#123; loader: &quot;style-loader&quot; &#125;,\n    &#123;\n      loader: &quot;css-loader&quot;,\n      options: &#123;\n        importLoaders: 1,\n        modules: true,\n        localIdentName: &quot;[name]___[hash:base64:5]&quot;\n      &#125;\n    &#125;,\n    &#123; loader: &quot;sass-loader&quot; &#125;\n  ]\n  &#x2F;&#x2F; loaders: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;sass-loader&quot;],\n&#125;</code></pre>\n","text":"使用 create-react-app 创建的项目默认不支持 less scss，以下增加 less scss 配置的步骤 暴露配置文件 npm run eject 在 node_modules/react-scripts/config 下找到 webpack.config.de...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"React","slug":"React","count":3,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":3,"path":"api/tags/React.json"}],"toc":"","author":{"name":"Bobby's Blog","slug":"blog-author","avatar":"/assets/user/bobby.jpg","link":"/","description":"欢迎来到我的博客 <br /> (σﾟ∀ﾟ)σ..:*☆哎哟不错哦","socials":{"github":"https://github.com/oOBobbyOo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"React组件异步加载","uid":"fba191276a9852d7cc27748cdc57a493","slug":"React组件异步加载","date":"2020-08-13T15:22:45.000Z","updated":"2021-05-14T10:50:56.000Z","comments":true,"path":"api/articles/React组件异步加载.json","keywords":null,"cover":"/assets/react.jpg","text":"使用 react-loadable 快速完成异步组件的编写npm install react-loadable --save &#x2F;&#x2F; eq: import Loadable from &#39;react-loadable&#39;; import Loadin...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"React","slug":"React","count":3,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":3,"path":"api/tags/React.json"}],"author":{"name":"Bobby's Blog","slug":"blog-author","avatar":"/assets/user/bobby.jpg","link":"/","description":"欢迎来到我的博客 <br /> (σﾟ∀ﾟ)σ..:*☆哎哟不错哦","socials":{"github":"https://github.com/oOBobbyOo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Parcel 入门实践","uid":"1da5fd0891b1fb5f2f44e192cd8c68c6","slug":"Parcel配置","date":"2019-12-25T13:50:36.000Z","updated":"2021-05-14T10:42:12.000Z","comments":true,"path":"api/articles/Parcel配置.json","keywords":null,"cover":"/assets/parcel.png","text":"Webpack 是目前最多人使用的前端打包工具，但 webpack 功能强大，导致配置比较复杂（各种对应转换 loader，各种插件等），如果配置不合理还可能导致打包速度过慢。最近出现了一款新的打包工具 Parcel，受关注程度不亚于 Webpack。Parcel 是一个 Web...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"Parcel","slug":"Parcel","count":1,"path":"api/categories/Parcel.json"}],"tags":[{"name":"Parcel","slug":"Parcel","count":1,"path":"api/tags/Parcel.json"}],"author":{"name":"Bobby's Blog","slug":"blog-author","avatar":"/assets/user/bobby.jpg","link":"/","description":"欢迎来到我的博客 <br /> (σﾟ∀ﾟ)σ..:*☆哎哟不错哦","socials":{"github":"https://github.com/oOBobbyOo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}